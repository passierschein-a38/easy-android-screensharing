<html>
<head>
<title>screener</title>
<script type="text/javascript" src="Broadway/Player/YUVWebGLCanvas.js" ></script>
<script type="text/javascript" src="Broadway/Player/Player.js" ></script>
<style>
#can{
	width: 256px;
	height: 400px;
}

#page{
	text-align: center ;
	width: 99% ;
}
</style>
</head>
<body>

<div id="page">

<a href="#" onclick="upScale(); return false;">upscale</a>
&nbsp;&nbsp;&nbsp;&nbsp;
<a href="#" onclick="downScale(); return false;">downScale</a>
<br/>
<script type="text/javascript">

function upScale()
{
	var el = document.getElementById( "can" );
	
	document.eas_w *= 1.5;
	document.eas_h *= 1.5;
	
	el.style.width = document.eas_w;
	el.style.height = document.eas_h;	
}

function downScale()
{
	var el = document.getElementById( "can" );
	
	document.eas_w /= 1.5;
	document.eas_h /= 1.5;
	
	el.style.width = document.eas_w;
	el.style.height = document.eas_h;
}

p = new Player({
  useWorker: true,
  workerFile: 'Broadway/Player/Decoder.js',  
});

p.canvas.id = "can";
p.canvas.style.width = "256";
p.canvas.style.height = "400";

document.eas_w = 256;
document.eas_h = 400;

document.player = p;
var page = document.getElementById("page");
page.appendChild(p.canvas);

//var connection = new WebSocket('ws://78.47.15.190:5000');
var connection = new WebSocket('ws://localhost:5000');
connection.binaryType = 'arraybuffer';

connection.onopen = function () {
  console.log( 'onopen' );
};

connection.onerror = function (error) {
  console.log('WebSocket Error ' + error);
};

connection.onmessage = function (e) { 
	var bytearray = new Uint8Array(e.data);
    document.player.decode( bytearray );  
};

</script>

</div>
</body>
</html>